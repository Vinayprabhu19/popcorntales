{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vinay\\\\Desktop\\\\popcorntales\\\\nextui\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport GridList from '@material-ui/core/GridList';\nimport Hidden from '@material-ui/core/Hidden';\nimport Paper from '@material-ui/core/Paper';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MailIcon from '@material-ui/icons/Mail';\nimport SortIcon from '@material-ui/icons/Sort';\nimport React, { Component } from 'react';\nimport { Carousel } from 'react-responsive-carousel';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport CardLayout from \"../components/CardLayout\";\nimport Sort from \"../components/Sort\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport Filter from \"../components/Filter\";\nimport Head from 'next/head';\nimport LazyImage from \"../components/LazyImage\";\nimport Grid from '@material-ui/core/Grid';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport SocialMenu from '../components/SocialMenu';\nimport Tooltip from '@material-ui/core/Tooltip';\nexport async function getServerSideProps(context) {\n  const res = await fetch('https://api.popcorntales.com/movie');\n  const movies = await res.json();\n  var banners = [];\n\n  for (var i = 1; i <= 4; i++) {\n    banners.push({\n      id: i,\n      name: \"Movie\" + i,\n      url: \"https://api.popcorntales.com/image?object=Banners/Movie\" + i + \".jpg\"\n    });\n  } // By returning { props: posts }, the Blog component\n  // will receive `posts` as a prop at build time\n\n\n  return {\n    props: {\n      movies,\n      banners\n    }\n  };\n}\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSelect\", (selectedIndex, e) => {\n      this.carouselIndex = selectedIndex;\n    });\n\n    var result = props.movies;\n    var filter = this.getFilteredData(result);\n    var banners = props.banners;\n    result.sort(function (a, b) {\n      return new Date(b.timeStamp) - new Date(a.timeStamp);\n    });\n    const rvs = result.map(item => {\n      return item;\n    });\n    var currentPages = [];\n    var len = rvs.length > 8 ? 8 : rvs.length;\n\n    for (var i = 0; i < len; i++) {\n      currentPages.push(rvs[i]);\n    } // Don't call this.setState() here!\n\n\n    this.state = {\n      reviews: [],\n      currentList: [],\n      banners: banners,\n      loading: true,\n      sortOpen: false,\n      filterOpen: false,\n      searchText: \"\",\n      activePage: 1,\n      totalPages: rvs.length,\n      allReviews: rvs,\n      reviews: rvs,\n      currentList: currentPages,\n      loading: false,\n      filter: {\n        \"language\": \"All\",\n        \"year\": \"All\",\n        \"rating\": [0.0, 5.0]\n      },\n      sorter: {\n        \"field\": \"timeStamp\",\n        \"sortType\": \"Descending\"\n      },\n      filterData: filter\n    };\n    this.carouselIndex = 0;\n    this.onPageChanged = this.onPageChanged.bind(this);\n    this.openSort = this.openSort.bind(this);\n    this.handleSortClose = this.handleSortClose.bind(this);\n    this.openFilter = this.openFilter.bind(this);\n    this.onSearch = this.onSearch.bind(this);\n  }\n\n  onPageChanged(e) {\n    var targetPage = parseInt(e.target.innerText);\n    var currentPages = [];\n    var start = 8 * (targetPage - 1);\n    var len = this.state.reviews.length > 8 * targetPage ? 8 * targetPage : this.state.reviews.length;\n\n    for (var i = start; i < len; i++) {\n      currentPages.push(this.state.reviews[i]);\n    }\n\n    this.setState({\n      currentList: currentPages,\n      activePage: targetPage\n    });\n  }\n\n  onSearch(e) {\n    var text = e.target.value;\n    var reviews = [];\n\n    for (var i = 0; i < this.state.allReviews.length; i++) {\n      reviews.push(this.state.allReviews[i]);\n    }\n\n    reviews = reviews.filter(function (r) {\n      return r.title.toLocaleLowerCase().includes(text.toLowerCase());\n    });\n    var currentPages = [];\n    var len = reviews.length > 8 ? 8 : reviews.length;\n\n    for (var i = 0; i < len; i++) {\n      currentPages.push(reviews[i]);\n    }\n\n    this.setState({\n      activePage: 1,\n      totalPages: reviews.length,\n      reviews: reviews,\n      currentList: currentPages,\n      loading: false,\n      filter: {\n        \"language\": \"All\",\n        \"year\": \"All\",\n        \"rating\": [0.0, 5.0]\n      },\n      searchText: text\n    });\n  }\n\n  onCardClick(image) {\n    this.props.history.push('/review/' + image.title);\n  }\n\n  openSort() {\n    this.setState({\n      sortOpen: true\n    });\n  }\n\n  openFilter() {\n    this.setState({\n      filterOpen: true\n    });\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 5\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, \"Popcorn Tales\"), __jsx(\"meta\", {\n      name: \"description\",\n      content: \"Popcorn Tales is an Indian movie review website reviewing movies from Kannada,Hindi,English,Tamil,Telugu,Malayalam and other languages. Find latest movie review here.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }), __jsx(\"link\", {\n      async: true,\n      rel: \"icon\",\n      type: \"image/x-icon\",\n      href: \"/favicon.ico\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }), __jsx(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }), __jsx(\"meta\", {\n      name: \"theme-color\",\n      content: \"#000000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }), __jsx(\"link\", {\n      async: true,\n      rel: \"canonical\",\n      href: \"https://www.Popcorntales.com/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), __jsx(\"script\", {\n      src: \"https://www.gstatic.com/firebasejs/7.14.3/firebase-app.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }), __jsx(\"script\", {\n      src: \"https://www.gstatic.com/firebasejs/7.14.3/firebase-analytics.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }), __jsx(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: `\n              var firebaseConfig = {\n                apiKey: \"AIzaSyAXuIINLnRmwacxjys3I6ziuSTq8lJ0iw8\",\n                authDomain: \"popcorntales-40767.firebaseapp.com\",\n                databaseURL: \"https://popcorntales-40767.firebaseio.com\",\n                projectId: \"popcorntales-40767\",\n                storageBucket: \"popcorntales-40767.appspot.com\",\n                messagingSenderId: \"512137794051\",\n                appId: \"1:512137794051:web:be612f2d6aa7c368d4b436\",\n                measurementId: \"G-LK5DBSBMTR\"\n              };\n              firebase.initializeApp(firebaseConfig);\n              firebase.analytics();\n                  `\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 5\n      }\n    }, __jsx(Backdrop, {\n      open: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }, __jsx(CircularProgress, {\n      color: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: this.state.loading ? 'hidden' : 'App',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 5\n      }\n    }, __jsx(AppBar, {\n      id: \"appBar\",\n      position: \"static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 7\n      }\n    }, __jsx(Toolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }, __jsx(Tooltip, {\n      title: \"Analytics\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, __jsx(\"a\", {\n      href: \"/analytics\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 38\n      }\n    }, __jsx(BarChartIcon, {\n      fontSize: \"large\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 59\n      }\n    }))), __jsx(\"h1\", {\n      id: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }, \"Popcorn Tales\"), __jsx(\"section\", {\n      className: \"rightToolbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }, __jsx(SocialMenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    })))), __jsx(Paper, {\n      id: \"banner-container\",\n      elevation: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 7\n      }\n    }, __jsx(Carousel, {\n      showThumbs: false,\n      showStatus: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }\n    }, this.state.banners.map(banner => {\n      return __jsx(\"div\", {\n        key: banner.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 24\n        }\n      }, __jsx(LazyImage, {\n        className: \"movie-img\",\n        src: banner.url,\n        key: banner.id,\n        alt: \"Movie Banner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }));\n    }))), __jsx(Paper, {\n      elevation: 12,\n      id: \"filterGrid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 7\n      }\n    }, __jsx(Grid, {\n      container: true,\n      justify: \"center\",\n      className: \"filter-sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      id: \"searchField\",\n      value: this.state.searchText,\n      onChange: this.onSearch,\n      placeholder: \"Movie Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }), __jsx(Hidden, {\n      smDown: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }, __jsx(Tooltip, {\n      title: \"Sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      className: \"iconBtn\",\n      onClick: this.openSort,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }, __jsx(SortIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 64\n      }\n    }))), __jsx(Tooltip, {\n      title: \"Filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, __jsx(Button, {\n      className: \"iconBtn\",\n      onClick: this.openFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, __jsx(FilterListIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 66\n      }\n    }), \" \"))), __jsx(Hidden, {\n      mdUp: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, __jsx(Tooltip, {\n      title: \"Sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }, __jsx(Button, {\n      className: \"iconBtn\",\n      onClick: this.openSort,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    }, __jsx(SortIcon, {\n      fontSize: \"default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 64\n      }\n    }))), __jsx(Tooltip, {\n      title: \"Filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, __jsx(Button, {\n      className: \"iconBtn\",\n      onClick: this.openFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }, __jsx(FilterListIcon, {\n      fontSize: \"default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 65\n      }\n    }), \" \"))), __jsx(Sort, {\n      open: this.state.sortOpen,\n      close: data => this.handleSortClose(data),\n      data: this.state.sorter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }), __jsx(Filter, {\n      open: this.state.filterOpen,\n      close: data => this.handleFilterClose(data),\n      data: this.state.filter,\n      filterData: this.state.filterData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }))), __jsx(\"div\", {\n      className: \"App-Content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 7\n      }\n    }, __jsx(GridList, {\n      className: \"cardGridList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }\n    }, this.state.currentList.map(image => __jsx(CardLayout, {\n      key: image.title,\n      review: image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 27\n      }\n    })))), __jsx(\"footer\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 7\n      }\n    }, __jsx(Pagination, {\n      count: this.state.totalPages % 8,\n      page: this.state.activePage,\n      onChange: this.onPageChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }\n    }), __jsx(Grid, {\n      container: true,\n      justify: \"center\",\n      id: \"footerText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }\n    }, __jsx(\"h4\", {\n      id: \"feedbackText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, \"Need your feedback to improve  \"), __jsx(\"a\", {\n      href: \"mailto:popcorntales19@gmail.com\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(MailIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 58\n      }\n    })))))));\n  }\n\n  getFilteredData(result) {\n    var languages = [\"All\"];\n    var years = [\"All\"];\n\n    for (var i = 0; i < result.length; i++) {\n      if (languages.includes(result[i].language)) continue;\n      languages.push(result[i].language);\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      if (years.includes(result[i].year)) continue;\n      years.push(result[i].year);\n    }\n\n    years.sort();\n    return {\n      languages: languages,\n      years: years,\n      rating: [0.0, 5.0]\n    };\n  }\n\n  handleFilterClose(data) {\n    if (data == null) {\n      this.setState({\n        filterOpen: false\n      });\n      return;\n    }\n\n    var reviews = [];\n\n    for (var i = 0; i < this.state.allReviews.length; i++) {\n      reviews.push(this.state.allReviews[i]);\n    }\n\n    if (data.filter.language != \"All\") {\n      reviews = reviews.filter(function (r) {\n        return r.language == data.filter.language;\n      });\n    }\n\n    if (data.filter.year != \"All\") {\n      reviews = reviews.filter(function (r) {\n        return r.year == data.filter.year;\n      });\n    }\n\n    reviews = reviews.filter(function (r) {\n      return r.rating >= data.filter.rating[0] && r.rating <= data.filter.rating[1];\n    });\n    var currentPages = [];\n    var len = reviews.length > 8 ? 8 : reviews.length;\n\n    for (var i = 0; i < len; i++) {\n      currentPages.push(reviews[i]);\n    }\n\n    this.setState({\n      activePage: 1,\n      totalPages: reviews.length,\n      reviews: reviews,\n      currentList: currentPages,\n      loading: false,\n      sortOpen: false,\n      filterOpen: false,\n      filter: data.filter,\n      searchText: \"\"\n    });\n  }\n\n  handleSortClose(data) {\n    // result.sort(function(a,b){return new Date(b.timeStamp)- new Date(a.timeStamp)});\n    // sorter:{\n    //   \"field\":\"timeStamp\",\n    //   \"sortType\":\"Ascending\"\n    // }\n    if (data.field === this.state.sorter.field && data.sortType === this.state.sorter.sortType) {\n      this.setState({\n        sortOpen: false\n      });\n      return;\n    }\n\n    var reviews;\n\n    if (this.field === \"timeStamp\") {\n      if (data.sortType === \"Descending\") reviews = this.state.reviews.sort(function (a, b) {\n        return new Date(b.timeStamp) - new Date(a.timeStamp);\n      });else reviews = this.state.reviews.sort(function (a, b) {\n        return new Date(a.timeStamp) - new Date(b.timeStamp);\n      });\n    } else {\n      if (data.sortType === \"Descending\") reviews = this.state.reviews.sort(function (a, b) {\n        if (a[data.field] > b[data.field]) {\n          return -1;\n        }\n\n        if (a[data.field] < b[data.field]) {\n          return 1;\n        }\n\n        return 0;\n      });else reviews = this.state.reviews.sort(function (a, b) {\n        if (a[data.field] < b[data.field]) {\n          return -1;\n        }\n\n        if (a[data.field] > b[data.field]) {\n          return 1;\n        }\n\n        return 0;\n      });\n    }\n\n    var currentPages = [];\n    var len = reviews.length > 8 ? 8 : reviews.length;\n\n    for (var i = 0; i < len; i++) {\n      currentPages.push(reviews[i]);\n    }\n\n    this.setState({\n      activePage: 1,\n      totalPages: reviews.length,\n      reviews: reviews,\n      currentList: currentPages,\n      loading: false,\n      sortOpen: false,\n      sorter: data\n    });\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/Vinay/Desktop/popcorntales/nextui/pages/index.js"],"names":["AppBar","Backdrop","Button","CircularProgress","GridList","Hidden","Paper","Toolbar","MailIcon","SortIcon","React","Component","Carousel","FilterListIcon","CardLayout","Sort","Pagination","Filter","Head","LazyImage","Grid","BarChartIcon","SocialMenu","Tooltip","getServerSideProps","context","res","fetch","movies","json","banners","i","push","id","name","url","props","Home","constructor","selectedIndex","e","carouselIndex","result","filter","getFilteredData","sort","a","b","Date","timeStamp","rvs","map","item","currentPages","len","length","state","reviews","currentList","loading","sortOpen","filterOpen","searchText","activePage","totalPages","allReviews","sorter","filterData","onPageChanged","bind","openSort","handleSortClose","openFilter","onSearch","targetPage","parseInt","target","innerText","start","setState","text","value","r","title","toLocaleLowerCase","includes","toLowerCase","onCardClick","image","history","render","__html","banner","data","handleFilterClose","languages","years","language","year","rating","field","sortType"],"mappings":"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","sourcesContent":["import AppBar from '@material-ui/core/AppBar';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport GridList from '@material-ui/core/GridList';\nimport Hidden from '@material-ui/core/Hidden';\nimport Paper from '@material-ui/core/Paper';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MailIcon from '@material-ui/icons/Mail';\nimport SortIcon from '@material-ui/icons/Sort';\nimport React, { Component } from 'react';\nimport { Carousel } from 'react-responsive-carousel';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport CardLayout from \"../components/CardLayout\";\nimport Sort from \"../components/Sort\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport Filter from \"../components/Filter\";\nimport Head from 'next/head';\nimport LazyImage from \"../components/LazyImage\";\nimport Grid from '@material-ui/core/Grid';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport SocialMenu from '../components/SocialMenu';\nimport Tooltip from '@material-ui/core/Tooltip';\nexport async function getServerSideProps(context){\n  const res = await fetch('https://api.popcorntales.com/movie');\n  const movies = await res.json();\n  var banners =[];\n  for(var i=1;i<=4;i++){\n    banners.push({\n      id:i,\n      name:\"Movie\"+i,\n      url:\"https://api.popcorntales.com/image?object=Banners/Movie\"+i+\".jpg\"\n    })\n  }\n  // By returning { props: posts }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      movies,\n      banners\n    },\n  }\n \n}\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    var result = props.movies;\n    var filter = this.getFilteredData(result);\n    var banners = props.banners;\n    result.sort(function(a,b){return new Date(b.timeStamp)- new Date(a.timeStamp)});\n      const rvs = result.map(item => {\n        return item;\n      });\n    var currentPages = [];\n    var len = (rvs.length > 8)?8:rvs.length;\n    for(var i=0;i< len ;i++){\n      currentPages.push(rvs[i]);\n    }\n    // Don't call this.setState() here!\n    this.state = { \n      reviews: [],\n      currentList:[],\n      banners:banners,\n      loading:true,\n      sortOpen:false,\n      filterOpen:false,\n      searchText:\"\",\n      activePage: 1,\n      totalPages: rvs.length,\n      allReviews:rvs,\n      reviews: rvs,\n      currentList : currentPages,\n      loading:false,\n      filter:{\n        \"language\":\"All\",\n        \"year\":\"All\",\n        \"rating\":[0.0,5.0]\n      },\n      sorter:{\n        \"field\":\"timeStamp\",\n        \"sortType\":\"Descending\"\n      },\n      filterData:filter\n     };\n\n     this.carouselIndex=0;\n     this.onPageChanged = this.onPageChanged.bind(this);\n     this.openSort = this.openSort.bind(this);\n     this.handleSortClose = this.handleSortClose.bind(this);\n     this.openFilter=this.openFilter.bind(this);\n     this.onSearch = this.onSearch.bind(this);\n    \n  }\n\n  \n\n  onPageChanged(e){\n    var targetPage=parseInt(e.target.innerText);\n      var currentPages = [];\n      var start = 8*(targetPage-1);\n      var len = (this.state.reviews.length > 8*(targetPage))?8*(targetPage):this.state.reviews.length;\n      for(var i=start;i< len ;i++){\n        currentPages.push(this.state.reviews[i]);\n      }\n\n      this.setState({\n        currentList : currentPages,\n        activePage:targetPage\n      });\n  }\n\n  onSearch(e){\n    \n    var text = e.target.value;\n\n    var reviews = [];\n    for(var i=0;i<this.state.allReviews.length;i++){\n      reviews.push(this.state.allReviews[i]);}\n\n\n    reviews = reviews.filter(function(r){return r.title.toLocaleLowerCase().includes(text.toLowerCase());});\n    \n    var currentPages = [];\n    var len = (reviews.length > 8)?8:reviews.length;\n    for(var i=0;i< len ;i++){\n      currentPages.push(reviews[i]);\n    }\n  this.setState({\n    activePage: 1,\n    totalPages: reviews.length,\n    reviews: reviews,\n    currentList : currentPages,\n    loading:false,\n    filter:{\n      \"language\":\"All\",\n      \"year\":\"All\",\n      \"rating\":[0.0,5.0]\n    },\n    searchText:text\n  });\n  }\n\n\n  onCardClick(image){\n    this.props.history.push('/review/'+image.title);\n  }\n\n  handleSelect = (selectedIndex, e) => {\n    this.carouselIndex=selectedIndex;\n  };\n  openSort(){\n    this.setState({\n      sortOpen : true\n    });\n  }\n  \n  openFilter(){\n    this.setState({\n      filterOpen : true\n    });\n  }\n  \n\nrender(){\n  return (\n    <>\n    <Head>\n        <title>Popcorn Tales</title>\n        <meta name=\"description\" content=\"Popcorn Tales is an Indian movie review website reviewing movies from Kannada,Hindi,English,Tamil,Telugu,Malayalam and other languages. Find latest movie review here.\"/>\n          <link async rel=\"icon\" type=\"image/x-icon\"  href=\"/favicon.ico\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          <meta name=\"theme-color\" content=\"#000000\" />\n          <link async rel=\"canonical\" href=\"https://www.Popcorntales.com/\" />\n          <script src=\"https://www.gstatic.com/firebasejs/7.14.3/firebase-app.js\"></script>\n          <script src=\"https://www.gstatic.com/firebasejs/7.14.3/firebase-analytics.js\"></script>\n          <script\n            dangerouslySetInnerHTML={{\n              __html: `\n              var firebaseConfig = {\n                apiKey: \"AIzaSyAXuIINLnRmwacxjys3I6ziuSTq8lJ0iw8\",\n                authDomain: \"popcorntales-40767.firebaseapp.com\",\n                databaseURL: \"https://popcorntales-40767.firebaseio.com\",\n                projectId: \"popcorntales-40767\",\n                storageBucket: \"popcorntales-40767.appspot.com\",\n                messagingSenderId: \"512137794051\",\n                appId: \"1:512137794051:web:be612f2d6aa7c368d4b436\",\n                measurementId: \"G-LK5DBSBMTR\"\n              };\n              firebase.initializeApp(firebaseConfig);\n              firebase.analytics();\n                  `,\n            }}\n          ></script>\n        </Head>\n    <div>\n      <Backdrop open={this.state.loading}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n    <div className={this.state.loading ? 'hidden' : 'App'}>\n      <AppBar id=\"appBar\" position=\"static\">\n        <Toolbar>\n          <Tooltip title=\"Analytics\"><a href=\"/analytics\"><BarChartIcon fontSize={\"large\"} color={\"primary\"}/></a></Tooltip>\n          <h1 id=\"title\">Popcorn Tales</h1>\n          <section className=\"rightToolbar\">\n            <SocialMenu/>\n          </section>\n        </Toolbar>\n      </AppBar>\n      <Paper id=\"banner-container\" elevation={10}>\n        <Carousel showThumbs={false} showStatus={false}>\n            {\n              this.state.banners.map(banner=>{\n                return <div key={banner.id}>\n                    <LazyImage  className=\"movie-img\" src={banner.url} key={banner.id} alt=\"Movie Banner\"/>\n                </div>\n              })\n            }\n        </Carousel>\n      </Paper >\n      <Paper elevation={12} id=\"filterGrid\">\n          <Grid container justify = \"center\"  className=\"filter-sort\">\n          <input type=\"text\" id=\"searchField\" value={this.state.searchText} onChange={this.onSearch} placeholder=\"Movie Title\"/>\n          <Hidden smDown>\n            <Tooltip title=\"Sort\">\n          <Button className=\"iconBtn\" onClick={this.openSort} ><SortIcon fontSize={\"large\"} /></Button>\n          </Tooltip>\n          <Tooltip title=\"Filter\">\n          <Button className=\"iconBtn\" onClick={this.openFilter} ><FilterListIcon fontSize={\"large\"}  /> </Button>\n          </Tooltip>\n          </Hidden>\n          <Hidden mdUp>\n          <Tooltip title=\"Sort\">\n          <Button className=\"iconBtn\" onClick={this.openSort} ><SortIcon fontSize={\"default\"} /></Button>\n          </Tooltip>\n          <Tooltip title=\"Filter\">\n          <Button className=\"iconBtn\" onClick={this.openFilter}><FilterListIcon fontSize={\"default\"} /> </Button>\n          </Tooltip>\n          </Hidden>\n        <Sort open={this.state.sortOpen} close={(data)=>this.handleSortClose(data)} data={this.state.sorter}/>\n        <Filter open={this.state.filterOpen} close={(data)=>this.handleFilterClose(data)} data={this.state.filter} filterData={this.state.filterData}/>\n        </Grid>\n      </Paper>\n      <div className=\"App-Content\">\n        <GridList className=\"cardGridList\"  >\n                      {this.state.currentList.map(image => (\n                          <CardLayout key={image.title} review={image}/>\n                      ))} \n        </GridList>\n      </div>\n      <footer>\n          <Pagination  count={this.state.totalPages%8} page={this.state.activePage}\n                onChange={this.onPageChanged}/>\n\n          <Grid container justify = \"center\" id=\"footerText\">\n              <h4 id=\"feedbackText\">Need your feedback to improve  </h4>\n              <a href=\"mailto:popcorntales19@gmail.com\"> <MailIcon/></a>\n              </Grid>\n        </footer>\n    </div>\n    </div>\n    </>\n  );\n}\ngetFilteredData(result){\n  var languages=[\"All\"];\n  var years =[\"All\"];\n  for(var i=0;i<result.length;i++){\n    if(languages.includes(result[i].language)) continue;\n    languages.push(result[i].language);}\n  for(var i=0;i<result.length;i++){\n      if(years.includes(result[i].year)) continue;\n      years.push(result[i].year);}\n  years.sort();\n  return {\n    languages:languages,\n    years:years,\n    rating:[0.0,5.0]\n  };\n}\n\nhandleFilterClose(data){\n  if(data == null){\n    this.setState({\n      filterOpen:false\n    });\n    return;\n  }\n  var reviews = [];\n  for(var i=0;i<this.state.allReviews.length;i++){\n    reviews.push(this.state.allReviews[i]);}\n  if(data.filter.language!=\"All\"){\n    reviews = reviews.filter(function(r){return r.language == data.filter.language});}\n  if(data.filter.year!=\"All\"){\n      reviews = reviews.filter(function(r){return r.year == data.filter.year});}\n  \n  reviews = reviews.filter(function(r){return r.rating >= data.filter.rating[0] && r.rating <= data.filter.rating[1]});\n    \n  var currentPages = [];\n  var len = (reviews.length > 8)?8:reviews.length;\n  for(var i=0;i< len ;i++){\n    currentPages.push(reviews[i]);\n  }\n  this.setState({\n    activePage: 1,\n    totalPages: reviews.length,\n    reviews: reviews,\n    currentList : currentPages,\n    loading:false,\n    sortOpen:false,\n    filterOpen:false,\n    filter:data.filter,\n    searchText:\"\"\n  });\n}\nhandleSortClose(data){\n  // result.sort(function(a,b){return new Date(b.timeStamp)- new Date(a.timeStamp)});\n  // sorter:{\n  //   \"field\":\"timeStamp\",\n  //   \"sortType\":\"Ascending\"\n  // }\n      if(data.field === this.state.sorter.field && data.sortType === this.state.sorter.sortType){\n        this.setState({sortOpen:false})\n        return;\n      }\n      var reviews;\n      if(this.field === \"timeStamp\"){\n        if(data.sortType === \"Descending\")\n          reviews = this.state.reviews.sort(function(a,b){return new Date(b.timeStamp)- new Date(a.timeStamp)})\n        else\n          reviews = this.state.reviews.sort(function(a,b){return new Date(a.timeStamp)- new Date(b.timeStamp)})\n      }\n      else{\n        if(data.sortType === \"Descending\")\n          reviews = this.state.reviews.sort(function(a,b){if(a[data.field] > b[data.field]) { return -1; }\n          if(a[data.field] < b[data.field]) { return 1; }\n          return 0;})\n        else\n          reviews = this.state.reviews.sort(function(a,b){if(a[data.field] < b[data.field]) { return -1; }\n          if(a[data.field] > b[data.field]) { return 1; }\n          return 0;})\n      }\n      var currentPages = [];\n      var len = (reviews.length > 8)?8:reviews.length;\n      for(var i=0;i< len ;i++){\n        currentPages.push(reviews[i]);\n      }\n      this.setState({\n        activePage: 1,\n        totalPages: reviews.length,\n        reviews: reviews,\n        currentList : currentPages,\n        loading:false,\n        sortOpen:false,\n        sorter:data\n      });\n    }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}