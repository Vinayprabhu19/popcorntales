{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{\"09IO\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/addImage\",function(){return n(\"GEhz\")}])},GEhz:function(e,t,n){\"use strict\";n.r(t);var a=n(\"o0o1\"),r=n.n(a);function o(e,t,n,a,r,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(a,r)}var i=n(\"1OyB\"),s=n(\"vuIU\"),u=n(\"JX7q\"),c=n(\"Ji7U\"),l=n(\"md7G\"),f=n(\"foSv\"),d=n(\"rePB\"),p=n(\"q1tI\"),m=n.n(p),h=n(\"ADg1\"),v=n(\"KJax\"),g=n(\"r9w1\"),b=n(\"Z3vd\"),y=m.a.createElement;function w(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var I=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},N=function(e){Object(c.a)(n,e);var t=w(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),Object(d.a)(Object(u.a)(a),\"setupBeforeUnloadListener\",(function(){window.addEventListener(\"beforeunload\",(function(e){return e.preventDefault(),e.returnValue=\"Are you sure you want to close ?\"}))})),a.state={imageName:\"\",userId:\"\",password:\"\"},a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.onFileChange=a.onFileChange.bind(Object(u.a)(a)),a}return Object(s.a)(n,[{key:\"componentDidUpdate\",value:function(e,t,n){}},{key:\"componentDidMount\",value:function(){this.setupBeforeUnloadListener()}},{key:\"onSubmit\",value:function(e){if(\"\"!=this.state.imageName){var t=this.state.image.replace(/^data:image\\/[a-z]+;base64,/,\"\"),n={imageName:this.state.imageName,image:t,imageType:this.state.imageType,userId:this.state.userId,password:this.state.password},a={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(n)};fetch(\"https://fierce-chamber-21718.herokuapp.com/https://api.popcorntales.com/object\",a).then((function(e){return e.json()})).then((function(e){alert(e.message),console.log(e)})).catch((function(e){alert(e),console.error(e)}))}else alert(\"Image name is empty\")}},{key:\"onFileChange\",value:function(){var e,t=(e=r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector(\"#file\").files[0],e.t0=this,e.next=5,I(n);case 5:e.t1=e.sent,e.t2=n.type,e.t3={image:e.t1,imageType:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case\"end\":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,u,\"next\",e)}function u(e){o(i,a,r,s,u,\"throw\",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this;return y(\"div\",{className:\"container\"},y(\"h3\",null,\"Add Image\"),y(h.a,{component:\"fieldset\",className:\"container\"},y(v.a,null,y(\"input\",{type:\"file\",id:\"file\",onChange:this.onFileChange}),y(g.a,{className:\"smallField\",type:\"text\",value:this.state.imageName,onChange:function(t){return e.setState({imageName:t.target.value})},label:\"Image Name\",InputProps:{disableUnderline:!0}}),y(g.a,{className:\"smallField\",type:\"text\",value:this.state.userId,onChange:function(t){return e.setState({userId:t.target.value})},label:\"User Id\",InputProps:{disableUnderline:!0}}),y(g.a,{className:\"smallField\",type:\"password\",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},label:\"Password\",InputProps:{disableUnderline:!0}}),y(b.a,{onClick:this.onSubmit},\"Submit\"))))}}]),n}(p.Component);t.default=N}},[[\"09IO\",0,1,2,3,4,6,9]]]);","extractedComments":[]}